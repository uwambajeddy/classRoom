"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js-stable/object/define-property");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.default = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime-corejs3/helpers/asyncToGenerator"));

var _promiseFs = _interopRequireDefault(require("promise-fs"));

var _isReadStream = _interopRequireDefault(require("./isReadStream"));

var _isStream = _interopRequireDefault(require("./isStream"));

var _isBuffer = _interopRequireDefault(require("./isBuffer"));

var _isBlob = _interopRequireDefault(require("./isBlob"));

/**
 * Get lenght of given value (in bytes)
 *
 * @param {any} value
 *
 * @return {number | undefined}
 *
 * @api private
 */
function getLength(_x) {
  return _getLength.apply(this, arguments);
}

function _getLength() {
  _getLength = (0, _asyncToGenerator2.default)(function* (value) {
    if ((0, _isStream.default)(value)) {
      if (!(0, _isReadStream.default)(value)) {
        return undefined;
      }

      return _promiseFs.default.stat(value.path).then(({
        size
      }) => size);
    }

    if ((0, _isBuffer.default)(value)) {
      return value.length;
    }

    if ((0, _isBlob.default)(value)) {
      return value.size;
    }

    return Buffer.from(String(value)).length;
  });
  return _getLength.apply(this, arguments);
}

var _default = getLength;
exports.default = _default;
module.exports = exports.default;
module.exports.default = exports.default;